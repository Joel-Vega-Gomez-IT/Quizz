<!--
  PARTS CONFIGURABLES DEL CODI:

  1. Bancs de preguntes:
     - Arrays 'preguntasRA1' i 'preguntasRA2' a l‚Äôinici de l‚Äôscript.
     - Cada pregunta t√©:
       - 'pregunta': text de la pregunta
       - 'opciones': array amb opcions de resposta
       - 'respuesta': √≠ndex (0-based) de l'opci√≥ correcta
     - Pots afegir, modificar o eliminar preguntes i opcions segons necessitis.

  2. Configuraci√≥ de selecci√≥ de RA:
     - Botons dins el div amb id="ra-buttons".
     - Opcions disponibles: 'ambos', 'ra1', 'ra2'.
     - Per afegir m√©s categories o canviar noms, modifica aquest grup i l√≤gica al script.

  3. Configuraci√≥ nombre de preguntes:
     - Botons dins el div amb id="numPreguntas-buttons".
     - Opcions: 10, 20, 30, 40, 50 i 'todas'.
     - Pots modificar, afegir o eliminar valors.

  4. L√≠mits per defecte:
     - Valor per defecte de 'totalPreguntas' (30).
     - Comprovaci√≥ que no es demanin m√©s preguntes de les disponibles.
     - Si vols canviar valors per defecte, modifica la variable 'totalPreguntas' o el codi al bot√≥ d'iniciar.

  5. Estils CSS:
     - Pots modificar colors, fonts i disposici√≥ dins la secci√≥ `<style>`.
     - Classes importants per respostes: 
       - .seleccionada (opci√≥ seleccionada)
       - .correcta (resposta correcta)
       - .incorrecta (resposta err√≤nia)
     - Botons i contenidors tenen classes i id per fer m√©s f√†cil la personalitzaci√≥.

  6. Textos de botons i missatges:
     - Textos com "Confirmar", "Seg√ºent", "Anterior", "Incorrecte", etc. estan dins l'HTML o l‚Äôscript.
     - Pots traduir o canviar aquests textos a la part HTML i dins les funcions JS.

  7. Funcionalitats:
     - Revisi√≥ de respostes despr√©s de finalitzar el quiz.
     - Reinici del quiz.
     - Barreja aleat√≤ria de preguntes (funci√≥ mezclarArray).
     - Limitaci√≥ de navegaci√≥ (botons anterior/seg√ºent).

  8. Estructura general:
     - Divs #config-container i #quiz-container separen la configuraci√≥ de la prova i la pr√≤pia prova.
     - Si vols afegir m√©s fases o canviar la navegaci√≥, modifica aquestes parts.

  -----------------------------------------------
  Per afegir preguntes noves, segueix l'estructura:

    {
      pregunta: "Text de la pregunta",
      opciones: ["Opci√≥ 1", "Opci√≥ 2", "Opci√≥ 3", "Opci√≥ 4"],
      respuesta: √≠ndex_de_la_opci√≥_correcta (0-based)
    }

  -----------------------------------------------
-->
<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="UTF-8" />
  <title>Quiz RA1 / RA2 - Personalitzable</title>
  
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      margin: 30px auto;
      padding: 10px;
    }
    h1 {
      text-align: center;
    }
    .pregunta {
      font-size: 1.2em;
      margin-bottom: 15px;
    }
    button {
      display: block;
      width: 100%;
      margin: 8px 0;
      padding: 12px;
      font-size: 1em;
      cursor: pointer;
      border: 1px solid #333;
      background-color: #eee;
      border-radius: 5px;
      transition: background-color 0.3s, transform 0.1s;
    }
    button:hover:not(:disabled) {
      background-color: #ddd;
    }
    button:disabled {
      cursor: default;
      opacity: 0.8;
    }

    .seleccionada { background-color: #cce5ff; border-color: #007bff; }
    .correcta { background-color: #28a745 !important; color: white; border-color: #1e7e34; }
    .incorrecta { background-color: #dc3545 !important; color: white; border-color: #b21f2d; }

    #resultat {
      margin-top: 25px;
      font-weight: bold;
      font-size: 1.1em;
    }
    #puntuatge {
      margin-top: 20px;
      font-size: 1.3em;
      text-align: center;
    }

    .nav-buttons {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      margin-top: 20px;
    }

    .nav-buttons button { width: 48%; }

    #btnSeguent, #btnConfirmar, #btnAnterior, #btnRevision, #btnReiniciar, #btnIniciarQuiz {
      background-color: #007BFF;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    #btnReiniciar { background-color: #28a745; }

    #config-container {
      text-align: center;
      margin-top: 40px;
    }

    /* Estils per grups de botons de selecci√≥ */
    .grupo-botones {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      margin: 15px 0 30px 0;
    }

    .grupo-botones button {
      width: 100px;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #333;
      background-color: #eee;
      color: #333;
      transition: background-color 0.3s, color 0.3s;
    }

    .grupo-botones button.seleccionat {
      background-color: #007BFF;
      color: white;
      border-color: #0056b3;
    }

  </style>
</head>
<body>

  <h1>üòé Quizz de pr√†ctica Digi üòé</h1>

  <!-- Pantalla de configuraci√≥ -->
  <div id="config-container">
    <h2>Cuantes preguntes vols respondre?</h2>
    <br>
    <p><b>Selecciona el RA:</b></p>
    <div id="ra-buttons" class="grupo-botones">
      <button data-value="ambos" class="seleccionat">Ambd√≥s</button>
      <button data-value="ra1">RA1</button>
      <button data-value="ra2">RA2</button>
    </div>

    <p><b>Quantes preguntes vols respondre?</b></p>
    <div id="numPreguntas-buttons" class="grupo-botones">
      <button data-value="10">10</button>
      <button data-value="20">20</button>
      <button data-value="30" class="seleccionat">30</button>
      <button data-value="40">40</button>
      <button data-value="50">50</button>
      <button data-value="todas">Totes</button>
    </div>

    <button id="btnIniciarQuiz">Iniciar Quiz</button>
  </div>

  <!-- Contenidor principal del quiz -->
  <div id="quiz-container" style="display:none;">
    <div id="pregunta" class="pregunta"></div>
    <div id="opciones"></div>
    <div id="resultat"></div>
    <button id="btnConfirmar" disabled>Confirmar</button>

    <div class="nav-buttons">
      <button id="btnAnterior" disabled>Anterior</button>
      <button id="btnSeguent" disabled>Seg√ºent</button>
    </div>

    <button id="btnRevision" style="display:none;">Revisar respostes</button>
    <button id="btnReiniciar" style="display:none;">Reiniciar Quiz</button>
  </div>

  <div id="puntuatge"></div>

<script>
  // üìò RA1: Banc de preguntes
  const preguntasRA1 = [

    { pregunta: "Qu√® √©s la digitalitzaci√≥?", opciones: ["Passar coses f√≠siques a digitals", "Crear nous productes digitals", "Fer publicitat online", "Canviar el model de negoci"], respuesta: 0 },
  
  { pregunta: "Quin √©s l'objectiu principal de la digitalitzaci√≥?", opciones: ["Fer el mateix m√©s r√†pid i sense paper", "Crear una nova empresa", "Eliminar els ordinadors", "Canviar el model de negoci"], respuesta: 0 },
  
  { pregunta: "Quin dels seg√ºents √©s un exemple de digitalitzaci√≥?", opciones: ["Escanejar documents i guardar-los en PDF", "Crear una app nova per vendre productes", "Fer classes amb intel¬∑lig√®ncia artificial", "Canviar tota l'estrat√®gia d'empresa"], respuesta: 0 },
  
  { pregunta: "Qu√® implica la transformaci√≥ digital?", opciones: ["Un canvi complet de l'empresa gr√†cies a la tecnologia", "Nom√©s escanejar documents", "Fer servir fulls d'Excel", "Instal¬∑lar m√©s impressores"], respuesta: 0 },
  
  { pregunta: "Objectiu principal de la transformaci√≥ digital?", opciones: ["Crear noves oportunitats i canviar el model de negoci", "Fer les coses m√©s r√†pides sense canviar res", "Passar documents a PDF", "Fer m√©s c√≤pies de seguretat"], respuesta: 0 },
  
  { pregunta: "Difer√®ncia en una frase: Digitalitzaci√≥ √©s...", opciones: ["Fer el de sempre per√≤ digital", "Un canvi total del negoci", "Treballar amb IA", "Fer servir m√†quines f√≠siques"], respuesta: 0 },
  
  { pregunta: "Difer√®ncia en una frase: Transformaci√≥ digital √©s...", opciones: ["Un canvi profund i una nova manera de treballar", "Passar de paper a PDF", "Automatitzar tasques simples", "Instal¬∑lar ordinadors nous"], respuesta: 0 },
  
  { pregunta: "Quina met√†fora descriu millor la digitalitzaci√≥?", opciones: ["Posar rodes a una maleta", "Convertir la maleta en un patinet el√®ctric", "Fer un avi√≥ nou", "Crear un robot aut√≤nom"], respuesta: 0 },
  
  { pregunta: "Quina met√†fora descriu millor la transformaci√≥ digital?", opciones: ["Passar de maleta a patinet el√®ctric", "Posar rodes a una maleta", "Afegir una etiqueta digital", "Fer una c√≤pia en paper"], respuesta: 0 },
  
  { pregunta: "En qu√® consisteix la digitalitzaci√≥ de processos?", opciones: ["Automatitzar tasques perqu√® siguin m√©s r√†pides", "Fer-ho tot a m√†", "Fer nous productes", "Passar factures a PDF sense automatitzar"], respuesta: 0 },
  
  { pregunta: "Quin exemple representa digitalitzaci√≥ simple?", opciones: ["Guardar contactes al m√≤bil en lloc d'una llibreta", "Un bot que respon autom√†ticament", "Netflix substituint videoclubs", "Una app que calcula vendes"], respuesta: 0 },
  
  { pregunta: "Quin exemple √©s digitalitzaci√≥ de processos?", opciones: ["Una botiga online que cobra sola", "Guardar factures en PDF", "Passar apunts a Word", "Fer una foto a la pissarra"], respuesta: 0 },
  
  { pregunta: "Quin exemple √©s transformaci√≥ digital?", opciones: ["Netflix substituint videoclubs", "Fer factures en Excel", "Escanejar un document", "Enviar un email en lloc d'una carta"], respuesta: 0 },
  
  { pregunta: "Quin √©s el resum curt de la digitalitzaci√≥?", opciones: ["Passar informaci√≥ a digital per ser m√©s r√†pid i ordenat", "Canviar tota l'empresa", "Fer un pla estrat√®gic", "Treballar sense internet"], respuesta: 0 },
  
  { pregunta: "Quin √©s el resum curt de la transformaci√≥ digital?", opciones: ["Canvi profund per adaptar-se a l'era digital", "Fer fotos a la pissarra", "Enviar emails", "Fer un web corporatiu"], respuesta: 0 },
  
  { pregunta: "Quina √©s la difer√®ncia principal entre IT i OT?", opciones: ["IT gestiona informaci√≥ digital, OT controla m√†quines f√≠siques", "IT controla m√†quines, OT gestiona dades", "Totes dues s√≥n iguals", "IT nom√©s serveix per fabricar productes"], respuesta: 0 },
  
  { pregunta: "Qu√® significa IT?", opciones: ["Information Technology", "Industrial Technology", "Internet Transmission", "Input Terminal"], respuesta: 0 },
  
  { pregunta: "Qu√® significa OT?", opciones: ["Operational Technology", "Online Technology", "Output Transfer", "Operational Transmission"], respuesta: 0 },
  
  { pregunta: "IT serveix per‚Ä¶", opciones: ["Gestionar informaci√≥ digital", "Controlar m√†quines f√≠siques", "Fer funcionar motors", "Mesurar temperatura"], respuesta: 0 },
  
  { pregunta: "OT serveix per‚Ä¶", opciones: ["Controlar m√†quines i processos f√≠sics", "Enviar emails", "Dissenyar p√†gines web", "Crear documents PDF"], respuesta: 0 },
  
  { pregunta: "Exemple d‚ÄôIT?", opciones: ["El sistema que guarda notes en Moodle", "Una m√†quina que talla roba", "Un sensor de temperatura", "Un robot industrial"], respuesta: 0 },
  
  { pregunta: "Exemple d‚ÄôOT?", opciones: ["Una m√†quina que barreja ingredients", "Un web corporatiu", "Un servidor de correu", "Una aplicaci√≥ d‚Äôofim√†tica"], respuesta: 0 },
  
  { pregunta: "Visualment, IT s‚Äôassocia amb‚Ä¶", opciones: ["Pantalles, dades i informaci√≥", "M√†quines que es mouen", "Sensors f√≠sics", "Robots industrials"], respuesta: 0 },
  
  { pregunta: "Visualment, OT s‚Äôassocia amb‚Ä¶", opciones: ["M√†quines i elements f√≠sics", "Pantalles i webs", "Emails i dades", "Codis QR"], respuesta: 0 },
  
  { pregunta: "Un bot√≥ d‚Äô‚ÄòEnviar email‚Äô √©s exemple de‚Ä¶", opciones: ["IT", "OT", "IOT", "AI"], respuesta: 0 },
  
  { pregunta: "Un bot√≥ que activa una m√†quina de caf√® autom√†tica √©s exemple de‚Ä¶", opciones: ["OT", "IT", "IOT", "AI"], respuesta: 0 }
    
  ];

  // üìó RA2: Banc de preguntes
  const preguntasRA2 = [
    { pregunta: "Qu√® significa JSON?", opciones: ["JavaScript Object Notation", "Java Standard Object Network", "Just Simple Object Naming", "Joint Source Online Network"], respuesta: 0 },
    { pregunta: "Quina paraula clau defineix una constant a JavaScript?", opciones: ["let", "const", "var", "define"], respuesta: 1 },
    { pregunta: "Quin operador s'usa per comparar igualtat estricta a JS?", opciones: ["==", "===", "=", "!="], respuesta: 1 },
    { pregunta: "Quin llenguatge s'usa principalment per bases de dades?", opciones: ["Python", "SQL", "HTML", "C#"], respuesta: 1 },
    { pregunta: "Quin comandament inicia un repositori Git?", opciones: ["git start", "git init", "git open", "git create"], respuesta: 1 },
  ];

  // üìö Variables globals
  let preguntas = [];
  let totalPreguntas = 30;
  let preguntaActual = 0;
  let puntaje = 0;
  let respuestasUsuario = [];
  let modoRevision = false;
  let opcionSeleccionada = null;

  // üì¶ Elements del DOM
  const configContainer = document.getElementById('config-container');
  const raButtons = document.getElementById('ra-buttons');
  const numPreguntasButtons = document.getElementById('numPreguntas-buttons');
  const btnIniciarQuiz = document.getElementById('btnIniciarQuiz');

  const quizContainer = document.getElementById('quiz-container');
  const preguntaEl = document.getElementById('pregunta');
  const opcionesEl = document.getElementById('opciones');
  const resultatEl = document.getElementById('resultat');
  const btnConfirmar = document.getElementById('btnConfirmar');
  const btnSeguent = document.getElementById('btnSeguent');
  const btnAnterior = document.getElementById('btnAnterior');
  const btnRevision = document.getElementById('btnRevision');
  const btnReiniciar = document.getElementById('btnReiniciar');
  const puntuatgeEl = document.getElementById('puntuatge');

  // Funcions per manejar selecci√≥ botons configuraci√≥
  function seleccionarBotonEnGrupo(container, boton) {
    const botones = container.querySelectorAll('button');
    botones.forEach(b => b.classList.remove('seleccionat'));
    boton.classList.add('seleccionat');
  }

  // Esdeveniment per selecci√≥ RA
  raButtons.addEventListener('click', e => {
    if (e.target.tagName === 'BUTTON') {
      seleccionarBotonEnGrupo(raButtons, e.target);
    }
  });

  // Esdeveniment per selecci√≥ nombre de preguntes
  numPreguntasButtons.addEventListener('click', e => {
    if (e.target.tagName === 'BUTTON') {
      seleccionarBotonEnGrupo(numPreguntasButtons, e.target);
    }
  });

  // üß© Funci√≥ per barrejar aleat√≤riament un array
  function mezclarArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
  }

  // üé¨ Inici del quiz despr√©s de configurar
  btnIniciarQuiz.addEventListener('click', () => {
    const raElegit = raButtons.querySelector('button.seleccionat').getAttribute('data-value');
    const cantidadStr = numPreguntasButtons.querySelector('button.seleccionat').getAttribute('data-value');

    // Seleccionar banc de preguntes segons RA
    if (raElegit === "ra1") {
      preguntas = [...preguntasRA1];
    } else if (raElegit === "ra2") {
      preguntas = [...preguntasRA2];
    } else {
      preguntas = [...preguntasRA1, ...preguntasRA2];
    }

    // Barrejar
    mezclarArray(preguntas);

    // Quantitat preguntes segons selecci√≥
    if (cantidadStr === 'todas') {
      totalPreguntas = preguntas.length;
    } else {
      const cantidad = parseInt(cantidadStr);
      totalPreguntas = (!isNaN(cantidad) && cantidad > 0) ? Math.min(cantidad, preguntas.length) : Math.min(30, preguntas.length);
    }

    preguntas = preguntas.slice(0, totalPreguntas);

    // Canviar a vista quiz
    configContainer.style.display = "none";
    quizContainer.style.display = "block";

    iniciarQuiz();
  });

  // üöÄ L√≤gica del quiz
  function iniciarQuiz() {
    preguntaActual = 0;
    puntaje = 0;
    respuestasUsuario = Array(totalPreguntas).fill(null);
    modoRevision = false;
    btnRevision.style.display = "none";
    btnReiniciar.style.display = "none";
    btnAnterior.style.display = "block";
    btnSeguent.style.display = "block";
    mostrarPregunta();
  }

  function mostrarPregunta() {
    const pregunta = preguntas[preguntaActual];
    const respuesta = respuestasUsuario[preguntaActual];

    preguntaEl.textContent = `Pregunta ${preguntaActual + 1} de ${totalPreguntas}: ${pregunta.pregunta}`;
    opcionesEl.innerHTML = "";
    resultatEl.textContent = "";
    btnConfirmar.disabled = true;

    pregunta.opciones.forEach((opcion, index) => {
      const btn = document.createElement('button');
      btn.textContent = opcion;
      btn.addEventListener('click', () => seleccionarOpcion(index, btn));
      opcionesEl.appendChild(btn);
    });

    if (respuesta) {
      const botones = opcionesEl.querySelectorAll('button');
      botones.forEach(b => b.disabled = true);
      botones[respuesta.correctaIndex].classList.add('correcta');
      if (!respuesta.correcto) {
        botones[respuesta.seleccionadaIndex].classList.add('incorrecta');
        resultatEl.textContent = `Incorrecte ‚ùå. La resposta correcta √©s: ${pregunta.opciones[pregunta.respuesta]}`;
      } else {
        resultatEl.textContent = "Correcte! ü§ô";
      }
      btnConfirmar.disabled = true;
    }

    btnAnterior.disabled = preguntaActual === 0;
    btnSeguent.disabled = !respuesta;

    if (modoRevision) {
      btnConfirmar.style.display = "none";
      btnSeguent.textContent = preguntaActual === totalPreguntas - 1 ? "Finalitzar revisi√≥" : "Seg√ºent";
      btnSeguent.disabled = false;
    } else {
      btnConfirmar.style.display = "block";
      btnSeguent.textContent = preguntaActual === totalPreguntas - 1 ? "Finalitzar" : "Seg√ºent";
    }
  }

  function seleccionarOpcion(index, btn) {
    if (respuestasUsuario[preguntaActual]) return;
    const botones = opcionesEl.querySelectorAll('button');
    botones.forEach(b => b.classList.remove('seleccionada'));
    btn.classList.add('seleccionada');
    opcionSeleccionada = index;
    btnConfirmar.disabled = false;
  }

  btnConfirmar.addEventListener('click', () => {
    if (opcionSeleccionada === null) return;
    const pregunta = preguntas[preguntaActual];
    const botones = opcionesEl.querySelectorAll('button');
    botones.forEach(b => b.disabled = true);

    const correcto = opcionSeleccionada === pregunta.respuesta;

    if (correcto) {
      botones[opcionSeleccionada].classList.remove('seleccionada');
      botones[opcionSeleccionada].classList.add('correcta');
      resultatEl.textContent = "Correcte! ü§ô";
      puntaje++;
    } else {
      botones[opcionSeleccionada].classList.remove('seleccionada');
      botones[opcionSeleccionada].classList.add('incorrecta');
      botones[pregunta.respuesta].classList.add('correcta');
      resultatEl.textContent = `Incorrecte ‚ùå. La resposta correcta √©s: ${pregunta.opciones[pregunta.respuesta]}`;
    }

    respuestasUsuario[preguntaActual] = {
      seleccionadaIndex: opcionSeleccionada,
      correctaIndex: pregunta.respuesta,
      correcto
    };

    btnConfirmar.disabled = true;
    btnSeguent.disabled = false;
  });

  btnSeguent.addEventListener('click', () => {
    if (modoRevision) {
      if (preguntaActual < totalPreguntas - 1) {
        preguntaActual++;
        mostrarPregunta();
      } else {
        mostrarResultados();
      }
      return;
    }

    if (preguntaActual < totalPreguntas - 1) {
      preguntaActual++;
      opcionSeleccionada = null;
      mostrarPregunta();
    } else {
      mostrarResultados();
    }
  });

  btnAnterior.addEventListener('click', () => {
    if (preguntaActual > 0) {
      preguntaActual--;
      opcionSeleccionada = null;
      mostrarPregunta();
    }
  });

  function mostrarResultados() {
    modoRevision = false;
    preguntaEl.textContent = "Quiz acabat!";
    opcionesEl.innerHTML = "";
    resultatEl.innerHTML = "";

    let resultadoHTML = "<h2>Resultats:</h2><ul>";
    respuestasUsuario.forEach((r, i) => {
      const p = preguntas[i];
      resultadoHTML += `<li><b>Pregunta ${i + 1}:</b> ${p.pregunta}<br>
        La teva resposta: ${p.opciones[r.seleccionadaIndex]} ${r.correcto ? "‚úÖ" : "‚ùå"}<br>
        Resposta correcta: ${p.opciones[r.correctaIndex]}</li><br>`;
    });
    resultadoHTML += "</ul>";

    resultatEl.innerHTML = resultadoHTML;
    puntuatgeEl.textContent = `Puntuaci√≥ final: ${puntaje} de ${totalPreguntas}`;

    btnConfirmar.style.display = "none";
    btnAnterior.style.display = "none";
    btnSeguent.style.display = "none";
    btnRevision.style.display = "block";
    btnReiniciar.style.display = "block";
  }

  btnRevision.addEventListener('click', () => {
    modoRevision = true;
    preguntaActual = 0;
    btnRevision.style.display = "none";
    btnReiniciar.style.display = "none";
    btnAnterior.style.display = "block";
    btnSeguent.style.display = "block";
    mostrarPregunta();
  });

  btnReiniciar.addEventListener('click', () => location.reload());

</script>

</body>
</html>
